<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentaci√≥n API - Cartilla Salud Mental</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .endpoint { @apply bg-gray-50 border-l-4 border-blue-500 p-4 mb-4 rounded-r-lg; }
    .method-get { @apply bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-semibold; }
    .method-post { @apply bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-semibold; }
    .method-put { @apply bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs font-semibold; }
    .method-delete { @apply bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-semibold; }
    .json-block { @apply bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto text-sm; }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <div class="max-w-6xl mx-auto p-6">
    
    <header class="mb-8">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">API Cartilla Salud Mental</h1>
      <p class="text-gray-600">Documentaci√≥n completa de endpoints y estructuras JSON</p>
      <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <p class="text-blue-800"><strong>Base URL:</strong> https://api.cartilla-salud.com/v1</p>
        <p class="text-blue-800"><strong>Autenticaci√≥n:</strong> Bearer Token en header Authorization</p>
      </div>
    </header>

    <!-- √çndice -->
    <nav class="mb-8 p-4 bg-white rounded-lg shadow">
      <h2 class="text-xl font-semibold mb-4">√çndice de Endpoints</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <h3 class="font-medium text-gray-800 mb-2">üîê Autenticaci√≥n</h3>
          <ul class="text-sm text-blue-600 space-y-1">
            <li><a href="#auth-login">POST /auth/login</a></li>
            <li><a href="#auth-register">POST /auth/register</a></li>
            <li><a href="#user-profile">GET /user/profile</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-medium text-gray-800 mb-2">üîç B√∫squeda</h3>
          <ul class="text-sm text-blue-600 space-y-1">
            <li><a href="#search-professionals">GET /professionals/search</a></li>
            <li><a href="#get-specialties">GET /specialties</a></li>
            <li><a href="#professional-profile">GET /professionals/{id}</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-medium text-gray-800 mb-2">üìû Contacto</h3>
          <ul class="text-sm text-blue-600 space-y-1">
            <li><a href="#contact-status">GET /user/contact-requests/status</a></li>
            <li><a href="#request-contact">POST /professionals/{id}/request-contact</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-medium text-gray-800 mb-2">üìÖ Citas</h3>
          <ul class="text-sm text-blue-600 space-y-1">
            <li><a href="#availability">GET /professionals/{id}/availability</a></li>
            <li><a href="#book-appointment">POST /appointments</a></li>
            <li><a href="#user-appointments">GET /user/appointments</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Endpoints -->
    <div class="space-y-8">
      
      <!-- Autenticaci√≥n -->
      <section id="auth-login" class="endpoint">
        <div class="flex items-center gap-2 mb-3">
          <span class="method-post">POST</span>
          <code class="text-lg font-mono">/auth/login</code>
        </div>
        <p class="text-gray-700 mb-4">Autenticar usuario y obtener token de acceso</p>
        
        <h4 class="font-semibold mb-2">Request Body:</h4>
        <pre class="json-block">{
  "email": "usuario@email.com",
  "password": "password123"
}</pre>

        <h4 class="font-semibold mb-2 mt-4">Response (200):</h4>
        <pre class="json-block">{
  "success": true,
  "message": "Login exitoso",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 123,
      "email": "usuario@email.com",
      "nombre": "Juan P√©rez",
      "telefono": "+54 9 11 1234-5678",
      "fecha_nacimiento": "1990-01-01",
      "genero": "masculino",
      "direccion": "Av. Siempre Viva 742",
      "foto_perfil": "https://cdn.cartilla-salud.com/users/123/avatar.jpg",
      "solicitudes_restantes": 5,
      "plan": "gratuito",
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</pre>
      </section>

      <!-- B√∫squeda de profesionales -->
      <section id="search-professionals" class="endpoint">
        <div class="flex items-center gap-2 mb-3">
          <span class="method-get">GET</span>
          <code class="text-lg font-mono">/professionals/search</code>
        </div>
        <p class="text-gray-700 mb-4">Buscar profesionales con filtros</p>
        
        <h4 class="font-semibold mb-2">Query Parameters:</h4>
        <div class="bg-gray-100 p-3 rounded mb-4">
          <ul class="text-sm space-y-1">
            <li><code>ubicacion</code> - string (ciudad, provincia, c√≥digo postal)</li>
            <li><code>especialidad</code> - string</li>
            <li><code>obra_social</code> - string</li>
            <li><code>disponibilidad</code> - enum (hoy, manana, semana)</li>
            <li><code>ordenar_por</code> - enum (rating, distancia, disponibilidad)</li>
            <li><code>radio_km</code> - number (radio de b√∫squeda en km)</li>
            <li><code>lat</code>, <code>lng</code> - number (coordenadas)</li>
            <li><code>page</code>, <code>limit</code> - number (paginaci√≥n)</li>
          </ul>
        </div>

        <h4 class="font-semibold mb-2">Response (200):</h4>
        <pre class="json-block">{
  "success": true,
  "data": {
    "professionals": [
      {
        "id": 1,
        "nombre": "Dr. Carlos Rodr√≠guez",
        "especialidad": "Psicolog√≠a Cl√≠nica",
        "subespecialidades": ["Terapia Cognitivo-Conductual", "Trastornos de Ansiedad"],
        "rating": 4.8,
        "total_reviews": 124,
        "zona_publica": "Zona Norte",
        "distancia_km": 2.5,
        "disponibilidad": "Disponible hoy",
        "proxima_cita": "2025-01-08T09:00:00Z",
        "obras_sociales": ["OSDE", "Swiss Medical", "Medif√©"],
        "idiomas": ["Espa√±ol", "Ingl√©s"],
        "foto_perfil": "https://cdn.cartilla-salud.com/professionals/1/avatar.jpg",
        "verificado": true,
        "a√±os_experiencia": 15,
        "precio_consulta": {
          "min": 8000,
          "max": 12000,
          "moneda": "ARS"
        }
      }
    ],
    "pagination": {
      "current_page": 1,
      "total_pages": 5,
      "total_results": 47,
      "per_page": 10
    },
    "filters_applied": {
      "ubicacion": "Buenos Aires",
      "especialidad": "Psicolog√≠a Cl√≠nica",
      "radio_km": 10
    }
  }
}</pre>
      </section>

      <!-- Perfil del profesional -->
      <section id="professional-profile" class="endpoint">
        <div class="flex items-center gap-2 mb-3">
          <span class="method-get">GET</span>
          <code class="text-lg font-mono">/professionals/{id}</code>
        </div>
        <p class="text-gray-700 mb-4">Obtener perfil completo del profesional</p>

        <h4 class="font-semibold mb-2">Response (200):</h4>
        <pre class="json-block">{
  "success": true,
  "data": {
    "professional": {
      "id": 1,
      "informacion_basica": {
        "nombre": "Dr. Carlos Rodr√≠guez",
        "especialidad_principal": "Psicolog√≠a Cl√≠nica",
        "especialidades": ["Psicolog√≠a Cl√≠nica", "Terapia Cognitivo-Conductual"],
        "rating": 4.8,
        "total_reviews": 124,
        "a√±os_experiencia": 15,
        "descripcion": "Psic√≥logo cl√≠nico con m√°s de 15 a√±os de experiencia...",
        "foto_perfil": "https://cdn.cartilla-salud.com/professionals/1/avatar.jpg",
        "verificado": true,
        "idiomas": ["Espa√±ol", "Ingl√©s", "Portugu√©s"]
      },
      "ubicacion": {
        "zona_publica": "Zona Norte",
        "ciudad": "Buenos Aires",
        "provincia": "Buenos Aires",
        "pais": "Argentina"
      },
      "experiencia_laboral": [
        {
          "puesto": "Psic√≥logo Cl√≠nico Senior",
          "institucion": "Centro de Salud Mental Integral",
          "fecha_inicio": "2015-01-01",
          "fecha_fin": null,
          "actual": true,
          "descripcion": [
            "Atenci√≥n psicol√≥gica individual y grupal",
            "Coordinaci√≥n de programas de prevenci√≥n"
          ]
        }
      ],
      "educacion": [
        {
          "titulo": "Posgrado en Terapia Cognitivo-Conductual",
          "institucion": "Universidad de Barcelona",
          "pais": "Espa√±a",
          "fecha_inicio": "2014-01-01",
          "fecha_fin": "2015-12-31",
          "tipo": "posgrado"
        }
      ],
      "acreditaciones": [
        {
          "nombre": "Matr√≠cula Profesional de Psic√≥logo",
          "numero": "MP 12345",
          "emisor": "Colegio de Psic√≥logos de Buenos Aires",
          "fecha_emision": "2008-03-15",
          "fecha_vencimiento": "2025-12-31",
          "vigente": true
        }
      ],
      "obras_sociales": ["OSDE", "Swiss Medical", "Medif√©", "Galeno"],
      "lugares_atencion": [
        {
          "id": "consultorio-1",
          "nombre": "Consultorio Privado",
          "tipo": "consultorio_privado",
          "zona_publica": "Zona Norte",
          "horarios": {
            "lunes": [{"inicio": "14:00", "fin": "19:00"}],
            "miercoles": [{"inicio": "09:00", "fin": "13:00"}]
          },
          "modalidades": ["presencial", "virtual"],
          "precio_consulta": {
            "presencial": 10000,
            "virtual": 8000,
            "moneda": "ARS"
          }
        }
      ]
    }
  }
}</pre>
      </section>

      <!-- Solicitar contacto -->
      <section id="request-contact" class="endpoint">
        <div class="flex items-center gap-2 mb-3">
          <span class="method-post">POST</span>
          <code class="text-lg font-mono">/professionals/{id}/request-contact</code>
        </div>
        <p class="text-gray-700 mb-4">Solicitar datos de contacto del profesional</p>

        <h4 class="font-semibold mb-2">Response (200):</h4>
        <pre class="json-block">{
  "success": true,
  "message": "Solicitud de contacto procesada exitosamente",
  "data": {
    "solicitud_id": 123,
    "professional": {
      "id": 1,
      "nombre": "Dr. Carlos Rodr√≠guez"
    },
    "contacto_revelado": {
      "telefono": "+54 11 4567-8901",
      "email": "carlos.rodriguez@email.com",
      "lugares_atencion": [
        {
          "id": "consultorio-1",
          "nombre": "Consultorio Privado",
          "direccion_completa": "Av. Santa Fe 1234, Piso 5, Oficina 12, CABA",
          "telefono": "+54 11 4567-8901",
          "horarios_detallados": "Lunes: 14:00 - 19:00 | Mi√©rcoles: 09:00 - 13:00"
        }
      ]
    },
    "solicitudes_restantes": 2,
    "fecha_solicitud": "2025-01-07T15:30:00Z"
  }
}</pre>
      </section>

      <!-- Disponibilidad -->
      <section id="availability" class="endpoint">
        <div class="flex items-center gap-2 mb-3">
          <span class="method-get">GET</span>
          <code class="text-lg font-mono">/professionals/{id}/availability</code>
        </div>
        <p class="text-gray-700 mb-4">Obtener disponibilidad del profesional para agendar citas</p>

        <h4 class="font-semibold mb-2">Response (200):</h4>
        <pre class="json-block">{
  "success": true,
  "data": {
    "professional_id": 1,
    "lugares_atencion": [
      {
        "lugar_id": "consultorio-1",
        "nombre": "Consultorio Privado",
        "disponibilidad": {
          "2025-01-08": {
            "manana": [
              {"hora": "09:00", "disponible": true, "precio": 10000},
              {"hora": "09:30", "disponible": true, "precio": 10000},
              {"hora": "10:00", "disponible": false, "precio": 10000}
            ],
            "tarde": [
              {"hora": "14:00", "disponible": true, "precio": 10000},
              {"hora": "14:30", "disponible": true, "precio": 10000}
            ],
            "noche": []
          }
        }
      }
    ],
    "rango_fechas": {
      "desde": "2025-01-08",
      "hasta": "2025-02-08"
    }
  }
}</pre>
      </section>

      <!-- Agendar cita -->
      <section id="book-appointment" class="endpoint">
        <div class="flex items-center gap-2 mb-3">
          <span class="method-post">POST</span>
          <code class="text-lg font-mono">/appointments</code>
        </div>
        <p class="text-gray-700 mb-4">Agendar una cita con el profesional</p>

        <h4 class="font-semibold mb-2">Request Body:</h4>
        <pre class="json-block">{
  "professional_id": 1,
  "lugar_id": "consultorio-1",
  "fecha": "2025-01-08",
  "hora": "09:00",
  "modalidad": "presencial",
  "motivo_consulta": "Consulta por ansiedad",
  "notas_adicionales": "Primera consulta"
}</pre>

        <h4 class="font-semibold mb-2 mt-4">Response (200):</h4>
        <pre class="json-block">{
  "success": true,
  "message": "Cita agendada exitosamente",
  "data": {
    "appointment": {
      "id": 456,
      "professional": {
        "id": 1,
        "nombre": "Dr. Carlos Rodr√≠guez"
      },
      "fecha": "2025-01-08",
      "hora": "09:00",
      "lugar": {
        "nombre": "Consultorio Privado",
        "direccion": "Av. Santa Fe 1234, Piso 5, Oficina 12, CABA"
      },
      "modalidad": "presencial",
      "precio": 10000,
      "moneda": "ARS",
      "estado": "confirmada",
      "codigo_confirmacion": "CITA-456-2025",
      "instrucciones": "Llegar 10 minutos antes de la cita",
      "politica_cancelacion": "Cancelaci√≥n gratuita hasta 24hs antes"
    }
  }
}</pre>
      </section>

    </div>

    <!-- C√≥digos de error -->
    <section class="mt-12 p-6 bg-white rounded-lg shadow">
      <h2 class="text-2xl font-semibold mb-4">C√≥digos de Error</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <h3 class="font-medium mb-2">Errores de Cliente (4xx)</h3>
          <ul class="text-sm space-y-1">
            <li><code>400</code> - Bad Request (datos inv√°lidos)</li>
            <li><code>401</code> - Unauthorized (token inv√°lido)</li>
            <li><code>403</code> - Forbidden (sin permisos)</li>
            <li><code>404</code> - Not Found (recurso no encontrado)</li>
            <li><code>429</code> - Too Many Requests (l√≠mite excedido)</li>
          </ul>
        </div>
        <div>
          <h3 class="font-medium mb-2">Errores de Servidor (5xx)</h3>
          <ul class="text-sm space-y-1">
            <li><code>500</code> - Internal Server Error</li>
            <li><code>502</code> - Bad Gateway</li>
            <li><code>503</code> - Service Unavailable</li>
          </ul>
        </div>
      </div>
      
      <h3 class="font-medium mb-2 mt-4">Formato de Error:</h3>
      <pre class="json-block">{
  "success": false,
  "message": "Descripci√≥n del error",
  "error": {
    "code": 400,
    "details": "Detalles espec√≠ficos del error",
    "field": "campo_con_error" // opcional
  }
}</pre>
    </section>

  </div>
</body>
</html>
